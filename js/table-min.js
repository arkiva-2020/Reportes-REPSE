function FiltroMes(){const t=$("#FiltroMes").val().split("/");$("#tableProvedores").html("");$("#tableProvedores").html('<table id="tablaDocumentosFaltantesProveedor" class="tableCustomize table table-bordered table-hover "><thead><tr class="tr"><th width="20%">Proveedor</th><th>RFC</th><th>Factura</th><th>Proyecto</th><th>Status</th><th>Total</th><th>Opciones</th></tr></thead><tbody></tbody></table>'),obtenerDatosFaltantesProvedor("#tablaDocumentosFaltantesProveedor tbody",$("#tablaDocumentosFaltantesProveedor").DataTable({pageLength:10,responsive:!0,order:[[0,"desc"]],dom:'<"html5buttons"B>lTfgitp',ajax:{url:"./apirest/filtroMes.php?mes="+t[0],type:"GET"},columns:[{data:"Name_Or_Tilte"},{data:"Rfc_Empresa"},{data:"Número_De_La_Factura"},{data:"Proyectos"},{data:"Estatus_Proveedor_Servicios_Especializados"},{data:"Total01"},{data:null,render:function(t){var e=" <button id ='"+t.ID+"' type='button' data-toggle='modal' data-target='#Trabajador' class='btn btn-success btn-circle btn-outline btn-sm  docEmpleados tooltip_detalles' data-info='Documentos Faltantes Empleados'><i class='fa fa-user' style=''></i></button>";return"<center>"+(" <button id ='"+t.ID+"' type='button' data-toggle='modal' data-target='#Proveedor' class='btn btn-info btn-circle btn-outline btn-sm docProveedor tooltip_detalles' data-info='Documentos Faltantes Proveedor'><i class='fa fa-home' style=''></i></button>")+e+"</center>"}}],buttons:[{extend:"copy",copySuccess:{1:"Copied one row to clipboard",_:"Copied %d rows to clipboard"},copyTitle:"Copy to clipboard"},{extend:"excel",title:"ExampleFile"},{extend:"pdf",title:"ExampleFile"}],language:idioma}))}function obtenerDatosFaltantesProvedor(t,e){$('[data-tooltip="tooltip"]').tooltip(),$('[data-toggle="tooltip"]').toggle(),$(t).on("click","button.docEmpleados",(function(){var t=e.row($(this).parents("tr")).data();t.detallesEmpleados.length,$("#DivTbDtailE").html("");$("#DivTbDtailE").html('<table id="tablaDocumentosFaltantesEmpleados" class="tableCustomize table table-hover "><thead><tr class="tr"><th width="10%">Empleado</th><th width="7%">CFDI</th><th width="7%">Contrato</th><th width="13%">Inscripcion IMSS</th><th width="10%">Periodo</th></tr></thead><tbody id="tbody-detalle-documentos-empleados"></tbody></table>');for(let e=0;e<t.detallesEmpleados.length;e++){var a='<div id="MiDivE'+t.detallesEmpleados[e].ID+'"><form style="margin-top: 5px; margin-right: 3px;" id="SubirArchivoE'+t.detallesEmpleados[e].ID+'"> <label for="File'+t.detallesEmpleados[e].ID+'"><span class="btn btn-warning editar btn-circle btn-outline tooltip_detalles" data-info="Subir Documento" style="padding-left: 8px;padding-right: 8px; border-radius: 20px;"><i style="" class="fa fa-warning"></i></span><input type="file" multiple id="File'+t.detallesEmpleados[e].ID+'" style="display:none" onChange="CargarEmpleadoE('+t.detallesEmpleados[e].ID+')"></label></form></div>';$("#tbody-detalle-documentos-empleados").append("<tr> <td>"+t.detallesEmpleados[e].Empleado+"</td><td>"+t.detallesEmpleados[e].Vigencia+'</td><td align=\'center\'>0</td><td align=\'center\'>0</td><td align=\'center\' style=\'display: flex;\'><button style="margin-right: 3px;" class="btn btn-success btn-circle btn-outline tooltip_detalles" data-info="Revisar" type="button"><i class="fa fa-sticky-note-o"></i></button>'+a+'<button class="btn btn-danger btn-circle btn-outline tooltip_detalles" data-info="Eliminar" type="button"><i class="fa fa-trash-o"></i></button></td></tr>')}setTimeout((()=>{$("#tablaDocumentosFaltantesEmpleados").DataTable({pageLength:10,responsive:!0,order:[[0,"desc"]],dom:'<"html5buttons"B>lTfgitp',buttons:[{extend:"copy",copySuccess:{1:"Copied one row to clipboard",_:"Copied %d rows to clipboard"},copyTitle:"Copy to clipboard",text:'<button style="color:white;" class="btn btn-xs btn-w-m btn-link" style="margin-right:0px!important" type="button"><i style="font-size:14px;" class="fa fa-files-o"></i> Copiar</button>'},{extend:"excel",title:"ExampleFile",text:'<button style="color:white;" class="btn btn-xs btn-w-m btn-link" style="margin-right:0px!important" type="button"><i style="font-size:14px;" class="fa fa-file-excel-o"></i> Tabla Excel</button>'},{extend:"pdf",title:"ExampleFile",text:'<button style="color:white;" class="btn btn-xs btn-w-m btn-link" style="margin-right:0px!important" type="button"><i style="font-size:14px;" class="fa fa-file-pdf-o"></i> Documento PDF</button>'}],language:idioma,destroy:!0})}),300)})),$(t).on("click","button.docProveedorPivote",(function(){$("#ProveedorPrincipal").css("display","none"),$("#ProveedorPage").css("display","block"),$("#botonBack").css("display","block");var t=e.row($(this).parents("tr")).data(),a=t.IdEmpresa,o=t.ID;ConsultaTablaMono(a,o);var l,n="",s="",i=[],r=[],d=0,p=0;n="";for(var c=t.detallesEmpleados,b=0;b<c.length;b++)for(var u=c[b].DocumentosEmpleados,m=0;m<u.length;m++){null==u[m].PeriodoFecha&&(u[m].PeriodoFecha="2022-05-01");var f=(ot=u[m].PeriodoFecha).split("-"),y=parseInt(f[0]),h=parseInt(f[1]);i.push(y);var g={mes:h,anio:y};r.push(g),r.sort(((t,e)=>t.mes-e.mes))}for(var D=t.detallesProveedores,v=[],x=0;x<D.length;x++){v.push(D[x]);var E=v.sort(((t,e)=>new Date(t.PeriodoFecha).getTime()-new Date(e.PeriodoFecha).getTime())),C=(f=(ot=E[x].PeriodoFecha).split("-"),parseInt(f[0])),P=parseInt(f[1]);i.push(C);g={mes:P,anio:C};r.push(g),r.sort(((t,e)=>t.mes-e.mes))}const F=i.reduce(((t,e)=>(t.includes(e)||t.push(e),t)),[]);i=F;let I=r.map((t=>[JSON.stringify(t),t]));r=[...new Map(I).values()];var w="",T="<tr>";w='<tr class="tr"><td colspan="4" rowspan="2" style="background-color: transparent!important; height: 40px;">Documentos Pendientes</td>';for(var _=0;_<i.length;_++){for(var S=0,k='<button style="display:none;font-size: 16px" class="btn btn-outline btn-link" type="button" id="botonVANIOS'+i[_]+'" onclick="clickCeldaAnio('+i[_]+', 1)"><i class="fa fa-plus-square-o"></i></button>',A='<button class="btn btn-outline btn-link" type="button" id="botonOCULTANIOS'+i[_]+'" onclick="clickCeldaAnio('+i[_]+', 0)" style="font-size: 16px;"><i class="fa fa-minus-square-o"></i></button>',M=0;M<r.length;M++)r[M].anio==i[_]&&(S++,T=T+'<td class="text-center A'+i[_]+'" style="background-color: transparent!important; height: 40px;">'+r[M].mes+"</td>");w=w+'<td colspan="'+S+'" class="text-center" style="background-color: transparent!important; height: 40px;">'+i[_]+k+A+"</td>"}w=w+"</tr>"+T+"</tr>",$("#CabeceraTabla").html(w);const N=t.detallesEmpleados2;$("#CabeceraTabla").data("EmpleadosDatos",N);for(var z=0;z<c.length;z++){const t=[];for(var j=0;j<c[z].DocumentosEmpleados.length;j++){const e=c[z].DocumentosEmpleados[j];let a=!1;for(var R=0;R<t.length;R++)if(t[R].Documentos===e.Documentos){a=!0;break}a||t.push(e)}c[z].DocumentosEmpleados=t}for(var B=0;B<c.length;B++){s="";var q=c[B].DocumentosEmpleados;d+=q.length;for(var L=0;L<q.length;L++){(ot=new Date(q[L].Fecha)).getFullYear(),ot.getMonth();var O="";for(_=0;_<r.length;_++){if(0!=(lt=busquedaArrayRetorno2(c[B].Empleado_ID,q[L].Documentos,r[_].anio,r[_].mes))){var V='<div id="MiDivE'+lt+'" style="display: inline-flex; margin-left: 7px;"><form style="margin-top: 5px; margin-right: 3px;" id="SubirArchivoE'+lt+'"><label for="File'+lt+'"><span class="btn btn-danger editar btn-circle btn-outline tooltip_detalles" data-info="Subir Documento" style="padding: 3.5px 6px;"><i class="fa fa-cloud-upload"></i><input type="file" multiple id="File'+lt+'" style="display:none" onChange="CargarEmpleadoEmpresa('+lt+')"></span></label></form></div>';O=O+'<td class="text-center celda'+t.detallesEmpleados[B].Empleado_ID+" A"+r[_].anio+" CeldaMes"+t.ID+'" style="display:none;">'+V+"</td>"}else{if(0!=(nt=busquedaArrayRetornoEmp1(c[B].Empleado_ID,q[L].Documentos,r[_].anio,r[_].mes))){var U='<div id="MiDiv'+nt+'" style="display: inline-flex; margin-left: 5px;"><form style="margin-top: 5px; margin-right: 3px;" id="SubirArchivo'+nt+'"><label for="File'+nt+'"><span class="btn btn-warning editar btn-circle btn-outline tooltip_detalles" data-info="Subir Comprobante de Pago" style="padding: 3px 6px"><i class="fa fa-warning"></i><input type="file" multiple id="File'+nt+'" style="display:none" onChange="CargarComprobanteProveedor('+nt+')"></span></label></form></div>';O=O+'<td class="text-center celda'+t.detallesEmpleados[B].Empleado_ID+" A"+r[_].anio+" CeldaMes"+t.ID+'" style="display:none">'+U+"</td>"}else{if(0!=(st=busquedaArrayRetornoEmp2(c[B].Empleado_ID,q[L].Documentos,r[_].anio,r[_].mes))){var G='<div id="MiDiv'+st+'" style="display: inline-flex; margin-left: 5px;"><form style="margin-top: 5px; margin-right: 3px;" id="SubirArchivo'+st+'"><label for="File'+st+'"><span class="btn btn-info editar btn-circle btn-outline tooltip_detalles" data-info="Pendiente" style="padding: 3px 9.7px"><i class="fa fa-info"></i><input type="file" multiple id="File'+st+'" style="display:none" onChange="CheckProveedores('+st+')"></span></label></form></div>';O=O+'<td class="text-center celda'+t.detallesEmpleados[B].Empleado_ID+" A"+r[_].anio+" CeldaMes"+t.ID+'" style="display:none">'+G+"</td>"}else{var Y='<div id="MiDiv'+lt+'" style="display: inline-flex; margin-left: 6px;"><form style="margin-top: 5px; margin-right: 3px;" id="SubirArchivo'+lt+'"><label for="File'+lt+'"><span class="btn btn-secondary editar btn-circle btn-outline tooltip_detalles" data-info="Válido" style="padding: 3px 6px; color: #27AE60!important;"><i class="fa fa-check"></i></span></label></form></div>';O=O+'<td class="text-center celda'+t.detallesEmpleados[B].Empleado_ID+" A"+r[_].anio+" CeldaMes"+t.ID+'" style="display:none">'+Y+"</td>"}}}}s=s+'<td class="celda'+t.detallesEmpleados[B].Empleado_ID+" CeldaMes"+t.ID+'" style="display:none">'+q[L].Documentos+"</td>"+O+"</tr>"}var J='<button style="font-size: 16px" class="btn btn-outline btn-link" type="button" id="botonV'+t.detallesEmpleados[B].Empleado_ID+'" onclick="clickCelda('+t.detallesEmpleados[B].Empleado_ID+', 1)"><i  class="fa fa-plus-square-o"></i></button>',X='<button class="btn btn-outline btn-link" type="button" id="botonM'+t.detallesEmpleados[B].Empleado_ID+'" onclick="clickCelda('+t.detallesEmpleados[B].Empleado_ID+', 0)" style="display:none; font-size: 16px;"><i class="fa fa-minus-square-o"></i></button>';n=n+'<td rowspan="'+q.length+'" class="celdaE'+t.ID+'" style="display:none">'+t.detallesEmpleados[B].Empleado+" "+J+X+"</td>"+s}n='<td rowspan="'+d+'">Doc empleados '+('<button style="font-size: 16px" class="btn btn-outline btn-link" type="button" id="botonVE'+t.ID+'" onclick="clickCelda3('+t.ID+', 1)"><i class="fa fa-plus-square-o"></i></button>')+('<button class="btn btn-outline btn-link" type="button" id="botonME'+t.ID+'" onclick="clickCelda3('+t.ID+', 0)" style="display:none; font-size:16px;"><i class="fa fa-minus-square-o"></i></button>')+"</td>"+n;var Z="",H="",K=t.detallesProveedores,Q=K;const W=[];for(j=0;j<K.length;j++){const t=K[j];let e=!1;for(R=0;R<W.length;R++)if(W[R].NombreDocumento===t.NombreDocumento&&W[R].ProveedorID===t.ProveedorID){e=!0;break}e||W.push(t)}p=(K=W).length,$("#CabeceraTabla").data("ProveedorDatos",Q);for(var tt='<button style="font-size: 16px" class="btn btn-outline btn-link" type="button" id="botonVC'+t.ID+'" onclick="clickCelda2('+t.ID+', 1)"><i class="fa fa-plus-square-o"></i></button>',et='<button class="btn btn-outline btn-link" type="button" id="botonMC'+t.ID+'" onclick="clickCelda2('+t.ID+', 0)" style="display:none; font-size: 16px;"><i class="fa fa-minus-square-o"></i></button>',at=0;at<K.length;at++){var ot;for((ot=new Date(K[at].PeriodoFecha)).getFullYear(),ot.getMonth(),O="",_=0;_<r.length;_++){var lt;if(0!=(lt=busquedaArrayRetorno(K[at].NombreDocumento,r[_].anio,r[_].mes))){V='<div id="MiDiv'+lt+'" style="display: inline-flex; margin-left: 7px;"><form style="margin-top: 5px; margin-right: 3px;" id="SubirArchivo'+lt+'"><label for="File'+lt+'"><span class="btn btn-danger editar btn-circle btn-outline tooltip_detalles" data-info="Subir Documento" style="padding: 3.5px 6px;"><i class="fa fa-cloud-upload"></i><input type="file" multiple id="File'+lt+'" style="display:none" onChange="CargarProveedores('+lt+')"></span></label></form></div>';O=O+'<td class="text-center celdaC'+t.ID+" A"+r[_].anio+'" style="display:none">'+V+"</td>"}else{var nt;if(0!=(nt=busquedaArrayRetornoProv(K[at].NombreDocumento,r[_].anio,r[_].mes))){U='<div id="MiDiv'+nt+'" style="display: inline-flex; margin-left: 5px;"><form style="margin-top: 5px; margin-right: 3px;" id="SubirArchivo'+nt+'"><label for="File'+nt+'"><span class="btn btn-warning editar btn-circle btn-outline tooltip_detalles" data-info="Subir Comprobante de Pago" style="padding: 3px 6px"><i class="fa fa-warning"></i><input type="file" multiple id="File'+nt+'" style="display:none" onChange="CargarComprobanteProveedor('+nt+')"></span></label></form></div>';O=O+'<td class=" text-center celdaC'+t.ID+" A"+r[_].anio+'" style="display:none">'+U+"</td>"}else{var st;if(0!=(st=busquedaArrayRetornoProv2(K[at].NombreDocumento,r[_].anio,r[_].mes))){G='<div id="MiDiv'+st+'" style="display: inline-flex; margin-left: 5px;"><form style="margin-top: 5px; margin-right: 3px;" id="SubirArchivo'+st+'"><label for="File'+st+'"><span class="btn btn-info editar btn-circle btn-outline tooltip_detalles" data-info="Pendiente" style="padding: 3px 9.7px"><i class="fa fa-info"></i><input type="file" multiple id="File'+st+'" style="display:none" onChange="CheckProveedores('+st+')"></span></label></form></div>';O=O+'<td class=" text-center celdaC'+t.ID+" A"+r[_].anio+'" style="display:none">'+G+"</td>"}else{Y='<div id="MiDiv'+lt+'" style="display: inline-flex; margin-left: 6px;"><form style="margin-top: 5px; margin-right: 3px;" id="SubirArchivo'+lt+'"><label for="File'+lt+'"><span class="btn btn-secondary editar btn-circle btn-outline tooltip_detalles" data-info="Válido" style="padding: 3px 6px; color: #27AE60!important;"><i class="fa fa-check"></i></span></label></form></div>';O=O+'<td class=" text-center celdaC'+t.ID+" A"+r[_].anio+'" style="display:none">'+Y+"</td>"}}}}Z=Z+'<td class="celdaC'+t.ID+'" style="display:none" colspan="2">'+K[at].NombreDocumento+"</td>"+O+"</tr>"}H=H+'<td rowspan="'+p+'">Doc empresa'+tt+et+"</td>"+Z,0==d&&(d=1),0==p&&(p=1),l='<tr><td rowspan="'+(d+=p)+'">'+t.Name_Or_Tilte+"</td>"+H+n,$("#tbody-detalle-documentos").html(l)}))}function busquedaArrayRetorno(t,e,a){for(var o=0,l=$("#CabeceraTabla").data("ProveedorDatos"),n=0;n<l.length;n++){var s=l[n].PeriodoFecha.split("-"),i=parseInt(s[0]),r=parseInt(s[1]);t==l[n].NombreDocumento&&e==i&&a==r&&"0"==l[n].Status&&(o=l[n].DocumentosID)}return o}function busquedaArrayRetornoProv(t,e,a){for(var o=0,l=$("#CabeceraTabla").data("ProveedorDatos"),n=0;n<l.length;n++){var s=l[n].PeriodoFecha.split("-"),i=parseInt(s[0]),r=parseInt(s[1]);t==l[n].NombreDocumento&&e==i&&a==r&&"1"==l[n].Status&&(o=l[n].DocumentosID)}return o}function busquedaArrayRetornoProv2(t,e,a){for(var o=0,l=$("#CabeceraTabla").data("ProveedorDatos"),n=0;n<l.length;n++){var s=l[n].PeriodoFecha.split("-"),i=parseInt(s[0]),r=parseInt(s[1]);t==l[n].NombreDocumento&&e==i&&a==r&&"2"==l[n].Status&&(o=l[n].DocumentosID)}return o}function busquedaArrayRetornoProv3(t,e,a){for(var o=0,l=$("#CabeceraTabla").data("ProveedorDatos"),n=0;n<l.length;n++){var s=l[n].PeriodoFecha.split("-"),i=parseInt(s[0]),r=parseInt(s[1]);t==l[n].NombreDocumento&&e==i&&a==r&&"3"==l[n].Status&&(o=l[n].DocumentosID)}return o}function busquedaArrayRetorno2(t,e,a,o){for(var l=0,n=$("#CabeceraTabla").data("EmpleadosDatos"),s=0;s<n.length;s++){cadena3="";for(var i=n[s].DocumentosEmpleados,r=0;r<i.length;r++){null==i[r].Fecha&&(i[r].Fecha="2022-05-01");var d=i[r].Fecha.split("-"),p=parseInt(d[0]),c=parseInt(d[1]);t==n[s].Empleado_ID&&e==i[r].Documentos&&a==p&&o==c&&"0"==i[r].Status&&(l=i[r].ID)}}return l}function busquedaArrayRetornoEmp1(t,e,a,o){for(var l=0,n=$("#CabeceraTabla").data("EmpleadosDatos"),s=0;s<n.length;s++){cadena3="";for(var i=n[s].DocumentosEmpleados,r=0;r<i.length;r++){null==i[r].Fecha&&(i[r].Fecha="2022-05-01");var d=i[r].Fecha.split("-"),p=parseInt(d[0]),c=parseInt(d[1]);t==n[s].Empleado_ID&&e==i[r].Documentos&&a==p&&o==c&&"1"==i[r].Status&&(l=i[r].ID)}}return l}function busquedaArrayRetornoEmp2(t,e,a,o){for(var l=0,n=$("#CabeceraTabla").data("EmpleadosDatos"),s=0;s<n.length;s++){cadena3="";for(var i=n[s].DocumentosEmpleados,r=0;r<i.length;r++){null==i[r].Fecha&&(i[r].Fecha="2022-05-01");var d=i[r].Fecha.split("-"),p=parseInt(d[0]),c=parseInt(d[1]);t==n[s].Empleado_ID&&e==i[r].Documentos&&a==p&&o==c&&"2"==i[r].Status&&(l=i[r].ID)}}return l}function busquedaArrayRetornoEmp3(t,e,a,o){for(var l=0,n=$("#CabeceraTabla").data("EmpleadosDatos"),s=0;s<n.length;s++){cadena3="";for(var i=n[s].DocumentosEmpleados,r=0;r<i.length;r++){null==i[r].Fecha&&(i[r].Fecha="2022-05-01");var d=i[r].Fecha.split("-"),p=parseInt(d[0]),c=parseInt(d[1]);t==n[s].Empleado_ID&&e==i[r].Documentos&&a==p&&o==c&&"3"==i[r].Status&&(l=i[r].ID)}}return l}function CargarProveedores(t){var e=new FormData(document.getElementById("SubirArchivo"+t));e.append("id",t),$.ajax({url:"apirest/CambiarEstadoDocumento.php",type:"post",dataType:"json",data:e,cache:!1,contentType:!1,processData:!1}).done((function(e){setTimeout((function(){toastr.options={closeButton:!0,progressBar:!0,showMethod:"slideDown",timeOut:8e3},toastr.success("Documento Subido Correctamente.","Éxito!")}),1300);var a='<form style="margin-top: 5px; margin-right: 3px;" id="SubirArchivo'+t+'"><label for="File'+t+'"><span class="btn btn-warning editar btn-circle btn-outline tooltip_detalles" data-info="Subir Comprobante de Pago" style="padding: 3px 6px"><i class="fa fa-warning"></i><input type="file" multiple id="File'+t+'" style="display:none" onChange="CargarComprobanteProveedor('+t+')"></span></label></form>';$("#MiDiv"+t).html(a),$("#tablaDocumentosFaltantesProveedor").DataTable().ajax.reload()}))}function CargarComprobanteProveedor(t){var e=new FormData(document.getElementById("SubirArchivo"+t));e.append("id",t),$.ajax({url:"apirest/CambiarEstadoDocumentoComprobante.php",type:"post",dataType:"json",data:e,cache:!1,contentType:!1,processData:!1}).done((function(e){setTimeout((function(){toastr.options={closeButton:!0,progressBar:!0,showMethod:"slideDown",timeOut:4e3},toastr.success("Comprobante Subido Correctamente","Éxito!")}),1300);var a='<form style="margin-top: 5px; margin-right: 3px;" id="SubirArchivo'+t+'"><label for="File'+t+'"><span class="btn btn-info editar btn-circle btn-outline tooltip_detalles" data-info="Pendiente Por Validación"  onClick="CheckProveedores('+t+')" style="padding: 3px 9.9px"><i class="fa fa-info"></i></span></label></form>';$("#MiDiv"+t).html(a),$("#tablaDocumentosFaltantesProveedor").DataTable().ajax.reload()}))}function CheckProveedores(t){var e=new FormData(document.getElementById("SubirArchivo"+t));e.append("id",t),$.ajax({url:"apirest/CambiarEstadoDocumentoCheck.php",type:"post",dataType:"json",data:e,cache:!1,contentType:!1,processData:!1}).done((function(e){setTimeout((function(){toastr.options={closeButton:!0,progressBar:!0,showMethod:"slideDown",timeOut:4e3},toastr.success("Documento Verificado Correctamente","Éxito!")}),1300);var a='<form style="margin-top: 5px; margin-right: 3px;" id="SubirArchivo'+t+'"><label for="File'+t+'"><span class="btn btn-secondary editar btn-circle btn-outline tooltip_detalles" data-info="Válido" style="padding: 3px 6px"><i class="fa fa-check"></i><input type="file" multiple id="File'+t+'" style="display:none" onChange="CargarComprobanteProveedor('+t+')"></span></label></form>';$("#MiDiv"+t).html(a),$("#tablaDocumentosFaltantesProveedor").DataTable().ajax.reload()}))}function CargarEmpleadoEmpresa(t){var e=new FormData(document.getElementById("SubirArchivoE"+t));e.append("id",t),$.ajax({url:"apirest/CambiarEstadoDocumento.php",type:"post",dataType:"json",data:e,cache:!1,contentType:!1,processData:!1}).done((function(e){setTimeout((function(){toastr.options={closeButton:!0,progressBar:!0,showMethod:"slideDown",timeOut:8e3},toastr.success("Documento Subido Correctamente.","Éxito!")}),1300);var a='<form style="margin-top: 5px; margin-right: 3px;" id="SubirArchivoE'+t+'"><label for="File'+t+'"><span class="btn btn-warning editar btn-circle btn-outline tooltip_detalles" data-info="Subir Comprobante de Pago" style="padding: 3px 6px"><i class="fa fa-warning"></i><input type="file" multiple id="File'+t+'" style="display:none" onChange="CargarEmpleadoEmpresa('+t+')"></span></label></form>';$("#MiDivE"+t).html(a),$("#tablaDocumentosFaltantesProveedor").DataTable().ajax.reload()}))}function Cargar(t,e){$("#Cargar").css("display","block")}function DatosDocumentosFaltantes(){$(document).ready((function(){$("#tablaReporte").DataTable({pageLength:10,responsive:!0,order:[[0,"desc"]],dom:'<"html5buttons"B>lTfgitp',ajax:{url:"./apirest/documentosFaltantes.php",type:"GET"},columns:[{data:"Name_Proveedor"},{data:"Nombres"},{data:"Apellidos"},{data:"NombreDocumentos"},{data:"Periodos"}],buttons:[{extend:"copy",copySuccess:{1:"Copied one row to clipboard",_:"Copied %d rows to clipboard"},copyTitle:"Copy to clipboard",text:'<button style="color:white;" class="btn btn-xs btn-w-m btn-link" style="margin-right:0px!important" type="button"><i style="font-size:14px;" class="fa fa-files-o"></i> Copiar</button>'},{extend:"excel",title:"ExampleFile",text:'<button style="color:white;" class="btn btn-xs btn-w-m btn-link" style="margin-right:0px!important" type="button"><i style="font-size:14px;" class="fa fa-file-excel-o"></i> Tabla Excel</button>'},{extend:"pdf",title:"ExampleFile",text:'<button style="color:white;" class="btn btn-xs btn-w-m btn-link" style="margin-right:0px!important" type="button"><i style="font-size:14px;" class="fa fa-file-pdf-o"></i> Documento PDF</button>'}],language:idioma})}))}function DatosFaltantesProvedorCliente(){var t=$("#FiltroMes").val();$(document).ready((function(){obtenerDatosFaltantesProvedorClientes("#tablaDocumentosFaltantesProveedor tbody",$("#tablaDocumentosFaltantesProveedor").DataTable({pageLength:10,responsive:!0,order:[[0,"desc"]],dom:'<"html5buttons"B>lTfgitp',ajax:{url:"./apirest/DatosFaltantesProvedorClientes.php?meses="+t,type:"GET"},columns:[{data:"Name_Or_Tilte"},{data:"Rfc_Empresa"},{data:"Número_De_La_Orden_De_Compra"},{data:"Número_De_La_Factura"},{data:null,render:function(t){return"<center>"+("<span class='badge tooltip_detalles' style='cursor: pointer;' data-info='"+t.Project_Title+"'>"+t.Proyectos+"</span>")+"</center>"}},{data:"Estatus_Proveedor_Servicios_Especializados"},{data:null,render:function(t){return"<center><span class='badge badge-success tooltip_detalles' style='cursor: pointer;' data-info='USD'>USD</span></center>"}},{data:"Total01"},{data:null,render:function(t){var e=" <button id ='"+t.ID+"' type='button' data-toggle='modal' data-target='#Trabajador' class='btn btn-success btn-circle btn-outline btn-sm  docEmpleados tooltip_detalles' data-info='Documentos Faltantes Empleados'><i class='fa fa-user' style=''></i></button>";return"<center>"+(" <button id ='"+t.ID+"' type='button' data-toggle='modal' data-target='#Proveedor' class='btn btn-info btn-circle btn-outline btn-sm docProveedor tooltip_detalles' data-info='Documentos Faltantes Proveedor'><i class='fa fa-home' style=''></i></button>")+e+"</center>"}}],buttons:[{extend:"copy",copySuccess:{1:"Copied one row to clipboard",_:"Copied %d rows to clipboard"},copyTitle:"Copy to clipboard",text:'<button style="color:white;" class="btn btn-xs btn-w-m btn-link" style="margin-right:0px!important" type="button"><i style="font-size:14px;" class="fa fa-files-o"></i> Copiar</button>'},{extend:"excel",title:"ExampleFile",text:'<button style="color:white;" class="btn btn-xs btn-w-m btn-link" style="margin-right:0px!important" type="button"><i style="font-size:14px;" class="fa fa-file-excel-o"></i> Tabla Excel</button>'},{extend:"pdf",title:"ExampleFile",text:'<button style="color:white;" class="btn btn-xs btn-w-m btn-link" style="margin-right:0px!important" type="button"><i style="font-size:14px;" class="fa fa-file-pdf-o"></i> Documento PDF</button>'}],language:idioma}))}))}function FiltroMesCliente(){const t=$("#FiltroMes").val().split("/");$("#tableProvedores").html("");$("#tableProvedores").html('<table id="tablaDocumentosFaltantesProveedor" class="tableCustomize table table-bordered table-hover "><thead><tr class="tr"><th width="20%">Proveedor</th><th>RFC</th><th>Factura</th><th>Proyecto</th><th>Status</th><th>Total</th><th>Opciones</th></tr></thead><tbody></tbody></table>'),obtenerDatosFaltantesProvedor("#tablaDocumentosFaltantesProveedor tbody",$("#tablaDocumentosFaltantesProveedor").DataTable({pageLength:10,responsive:!0,order:[[0,"desc"]],dom:'<"html5buttons"B>lTfgitp',ajax:{url:"./apirest/filtroMes.php?mes="+t[0],type:"GET"},columns:[{data:"Name_Or_Tilte"},{data:"Rfc_Empresa"},{data:"Número_De_La_Factura"},{data:"Proyectos"},{data:"Estatus_Proveedor_Servicios_Especializados"},{data:"Total01"},{data:null,render:function(t){var e=" <button id ='"+t.ID+"' type='button' data-toggle='modal' data-target='#Trabajador' class='btn btn-success btn-circle btn-outline btn-sm  docEmpleados tooltip_detalles' data-info='Documentos Faltantes Empleados'><i class='fa fa-user' style=''></i></button>";return"<center>"+(" <button id ='"+t.ID+"' type='button' data-toggle='modal' data-target='#Proveedor' class='btn btn-info btn-circle btn-outline btn-sm docProveedor tooltip_detalles' data-info='Documentos Faltantes Proveedor'><i class='fa fa-home' style=''></i></button>")+e+"</center>"}}],buttons:[{extend:"copy",copySuccess:{1:"Copied one row to clipboard",_:"Copied %d rows to clipboard"},copyTitle:"Copy to clipboard"},{extend:"excel",title:"ExampleFile"},{extend:"pdf",title:"ExampleFile"}],language:idioma}))}function obtenerDatosFaltantesProvedorClientes(t,e){$('[data-tooltip="tooltip"]').tooltip(),$('[data-toggle="tooltip"]').toggle(),$(t).on("click","button.docProveedor",(function(){var t=e.row($(this).parents("tr")).data();$("#DivTbDtailP").html("");$("#DivTbDtailP").html('<table id="tablaDocumentosFaltantesTrabajadores" class="tableCustomize table table-bordered table-hover "><thead><tr class="tr"><th width="20%">Proveedor</th><th>Nombre Documentos</th><th>Periodo</th><th>Tipo Documento</th><th width="10%">Periodo</th></tr></thead><tbody id="tbody-detalle-documentos"></tbody></table>');for(let e=0;e<t.detallesProveedores.length;e++){var a='<div id="MiDiv'+t.detallesProveedores[e].ID+'"><form style="margin-top: 5px; margin-right: 3px;" id="SubirArchivo'+t.detallesProveedores[e].ID+'"> <label for="File'+t.detallesProveedores[e].ID+'"><span class="btn btn-warning editar btn-circle btn-outline tooltip_detalles" data-info="Subir Documento" style="padding-left: 8px;padding-right: 8px; border-radius: 20px;"><i style="" class="fa fa-warning"></i></span><input type="file" id="File'+t.detallesProveedores[e].ID+'" style="display:none" onChange="CargarProveedores('+t.detallesProveedores[e].ID+')"></label></form></div>';$("#tbody-detalle-documentos").append("<tr> <td>"+t.detallesProveedores[e].Proveedor+"</td><td>"+t.detallesProveedores[e].NombreDocumento+"</td><td><center>"+t.detallesProveedores[e].Periodo+"</center></td><td><center>"+t.detallesProveedores[e].TipoDocumento+'</center></td><td align=\'center\' style=\'display: flex;\'><button style="margin-right: 3px;" class="btn btn-success btn-circle btn-outline tooltip_detalles" data-info="Revisar" type="button"><i class="fa fa-sticky-note-o"></i></button>'+a+'<button class="btn btn-danger btn-circle btn-outline tooltip_detalles" data-info="Eliminar" type="button"><i class="fa fa-trash-o"></i></button></td></tr>')}setTimeout((()=>{$("#tablaDocumentosFaltantesTrabajadores").DataTable({pageLength:10,responsive:!0,order:[[0,"desc"]],dom:'<"html5buttons"B>lTfgitp',buttons:[{extend:"copy",copySuccess:{1:"Copied one row to clipboard",_:"Copied %d rows to clipboard"},copyTitle:"Copy to clipboard",text:'<button style="color:white;" class="btn btn-xs btn-w-m btn-link" style="margin-right:0px!important" type="button"><i style="font-size:14px;" class="fa fa-files-o"></i> Copiar</button>'},{extend:"excel",title:"ExampleFile",text:'<button style="color:white;" class="btn btn-xs btn-w-m btn-link" style="margin-right:0px!important" type="button"><i style="font-size:14px;" class="fa fa-file-excel-o"></i> Tabla Excel</button>'},{extend:"pdf",title:"ExampleFile",text:'<button style="color:white;" class="btn btn-xs btn-w-m btn-link" style="margin-right:0px!important" type="button"><i style="font-size:14px;" class="fa fa-file-pdf-o"></i> Documento PDF</button>'}],language:idioma,destroy:!0})}),300)})),$(t).on("click","button.docEmpleados",(function(){var t=e.row($(this).parents("tr")).data();t.detallesEmpleados.length,$("#DivTbDtailE").html("");$("#DivTbDtailE").html('<table id="tablaDocumentosFaltantesEmpleados" class="tableCustomize table table-hover "><thead><tr class="tr"><th width="10%">Empleado</th><th width="7%">CFDI</th><th width="7%">Contrato</th><th width="13%">Inscripción IMSS</th><th width="10%">Periodo</th></tr></thead><tbody id="tbody-detalle-documentos-empleados"></tbody></table>');for(let e=0;e<t.detallesEmpleados.length;e++){var a='<div id="MiDivE'+t.detallesEmpleados[e].ID+'"><form style="margin-top: 5px; margin-right: 3px;" id="SubirArchivoE'+t.detallesEmpleados[e].ID+'"> <label for="File'+t.detallesEmpleados[e].ID+'"><span class="btn btn-warning editar btn-circle btn-outline tooltip_detalles" data-info="Subir Documento" style="padding-left: 8px;padding-right: 8px; border-radius: 20px;"><i style="" class="fa fa-warning"></i></span><input type="file" multiple id="File'+t.detallesEmpleados[e].ID+'" style="display:none" onChange="CargarEmpleadoE('+t.detallesEmpleados[e].ID+')"></label></form></div>';$("#tbody-detalle-documentos-empleados").append("<tr> <td>"+t.detallesEmpleados[e].Empleado+"</td><td>"+t.detallesEmpleados[e].Vigencia+'</td><td align=\'center\'>0</td><td align=\'center\'>0</td><td align=\'center\' style=\'display: flex;\'><button style="margin-right: 3px;" class="btn btn-success btn-circle btn-outline tooltip_detalles" data-info="Revisar" type="button"><i class="fa fa-sticky-note-o"></i></button>'+a+'<button class="btn btn-danger btn-circle btn-outline tooltip_detalles" data-info="Eliminar" type="button"><i class="fa fa-trash-o"></i></button></td></tr>')}setTimeout((()=>{$("#tablaDocumentosFaltantesEmpleados").DataTable({pageLength:10,responsive:!0,order:[[0,"desc"]],dom:'<"html5buttons"B>lTfgitp',buttons:[{extend:"copy",copySuccess:{1:"Copied one row to clipboard",_:"Copied %d rows to clipboard"},copyTitle:"Copy to clipboard",text:'<button style="color:white;" class="btn btn-xs btn-w-m btn-link" style="margin-right:0px!important" type="button"><i style="font-size:14px;" class="fa fa-files-o"></i> Copiar</button>'},{extend:"excel",title:"ExampleFile",text:'<button style="color:white;" class="btn btn-xs btn-w-m btn-link" style="margin-right:0px!important" type="button"><i style="font-size:14px;" class="fa fa-file-excel-o"></i> Tabla Excel</button>'},{extend:"pdf",title:"ExampleFile",text:'<button style="color:white;" class="btn btn-xs btn-w-m btn-link" style="margin-right:0px!important" type="button"><i style="font-size:14px;" class="fa fa-file-pdf-o"></i> Documento PDF</button>'}],language:idioma,destroy:!0})}),300)}))}function CargarProveedoresClientes(t){var e=new FormData(document.getElementById("SubirArchivo"+t));e.append("id",t),$.ajax({url:"apirest/CambiarEstadoDocumento.php",type:"post",dataType:"json",data:e,cache:!1,contentType:!1,processData:!1}).done((function(e){$("#MiDiv"+t).html('<span style="padding-left: 9px;padding-right: 9px; border-radius: 20px;" class="btn btn-success btn-circle btn-outline tooltip_detalles" data-info="Documento Subido!"><i style="" class="fa fa-check-circle"></i></span>'),$("#tablaDocumentosFaltantesProveedor").DataTable().ajax.reload()}))}function CargarEmpleadoE(t){var e=new FormData(document.getElementById("SubirArchivoE"+t));e.append("id",t),$.ajax({url:"apirest/CambiarEstadoDocumento.php",type:"post",dataType:"json",data:e,cache:!1,contentType:!1,processData:!1}).done((function(e){$("#MiDivE"+t).html('<span style="padding-left: 9px;padding-right: 9px; border-radius: 20px;" class="btn btn-success btn-circle btn-outline tooltip_detalles" data-info="Documento Subido!"><i style="" class="fa fa-check-circle"></i></span>'),$("#tablaDocumentosFaltantesProveedor").DataTable().ajax.reload()}))}$((function(){$('[data-tooltip="tooltip"]').tooltip(),$('[data-toggle="tooltip"]').toggle()}));var idioma={sProcessing:"Procesando...",sLengthMenu:"Mostrar _MENU_ registros",sZeroRecords:"No se encontraron resultados",sEmptyTable:"Ningún dato disponible en esta tabla",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sSearch:"Buscar:",searchPlaceholder:"Search..",sUrl:"",sInfoThousands:",",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"Primero",sLast:"Último",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{create:"Nuevo",edit:"Cambiar",remove:"Borrar",copy:"Copiar",csv:"Fichero CSV",excel:"Tabla Excel",pdf:"Documento PDF",print:"Imprimir",colvis:"Visibilidad columnas",collection:"Colección",upload:"Seleccione fichero...."}};